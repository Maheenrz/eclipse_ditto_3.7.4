
1.0maheenrz_eclipse-ditto-3-7-4JavaFrontend"1753508686717*java2.BÇ6

zthingsearch/service/src/main/java/org/eclipse/ditto/thingsearch/service/persistence/read/MongoThingsSearchPersistence.java2

package4
;
6org.eclipse.ditto.thingsearch.service.persistence.read5
X
Sorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence7


class8

access9

public10

simple name11
"
MongoThingsSearchPersistence12
5
/Recovered#typeBindingLThingsSearchPersistence;014

unknown15


implements16


uses17
d
^org.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence.collection19

field20

private21


collection22

MongoCollection24

is type25
&
 Recovered#typeBindingLDocument;027
]
Worg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence.log29
	
log30

LoggingAdapter32
j
dorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence.indexInitializer34

indexInitializer35

IndexInitializer37
f
`org.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence.maxQueryTime39

maxQueryTime40
u
oorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence.documentDbCompatibilityMode42
!
documentDbCompatibilityMode43
_
Yorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence.hints45

hints46


MongoHints48
ú
ïorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#<init>(LDittoMongoClient;LActorSystem;LSearchPersistenceConfig;)V50

method51
.
(Recovered#typeBindingLDittoMongoClient;053

	has param54
)
#Recovered#typeBindingLActorSystem;056
5
/Recovered#typeBindingLSearchPersistenceConfig;058

calls59
+
%Recovered#typeBindingLMongoDatabase;061


references62
∏
±org.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#<init>(LMongoCollection;LLoggingAdapter;LIndexInitializer;Ljava/time/Duration;ZLMongoHints;)V64
-
'Recovered#typeBindingLMongoCollection;066
,
&Recovered#typeBindingLLoggingAdapter;068
.
(Recovered#typeBindingLIndexInitializer;070
(
"Recovered#typeBindingLMongoHints;072
ÿ
—org.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#withHintsByNamespace(Ljava/lang/String;)Lorg/eclipse/ditto/thingsearch/service/persistence/read/MongoThingsSearchPersistence;74

withHintsByNamespace75

returns76
î
çorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#initializeIndices()Ljava/util/concurrent/CompletionStage;78

initializeIndices79
Ä
zorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#generateNamespaceCountReport()LSource;81
"
generateNamespaceCountReport82

Source84
9
3Recovered#typeBindingLSearchNamespaceReportResult;086
%
Recovered#typeBindingLNotUsed;088
0
*Recovered#typeBindingLAggregatePublisher;090
8
2Recovered#typeBindingLSearchNamespaceResultEntry;092
Ä
zorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#count(LQuery;Ljava/util/List;)LSource;94

count95
#
Recovered#typeBindingLQuery;097

Nullable99

annotated by100
'
 Recovered#typeBindingLNullable;0102
+
$Recovered#typeBindingLBsonDocument;0104

BsonDocument106
ë
âorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#getMongoFilter(LQuery;Ljava/util/List;)LBsonDocument;108
+
$Recovered#typeBindingLCountOptions;0110

PartialFunction112
ò
êorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#handleMongoExecutionTimeExceededException()LPartialFunction;114
u
norg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#sudoCount(LQuery;)LSource;116

	sudoCount117
ì
ãorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#findAll(LQuery;Ljava/util/List;Ljava/util/Set;)LSource;119

findAll120
)
"Recovered#typeBindingLResultList;0122
1
*Recovered#typeBindingLTimestampedThingId;0124
¬
∫org.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#findAllInternal(LQuery;Ljava/util/List;Ljava/util/Set;Ljava/lang/Integer;Ljava/time/Duration;)LSource;126
ú
îorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#findAllUnlimited(LQuery;Ljava/util/List;Ljava/util/Set;)LSource;128

findAllUnlimited129
&
Recovered#typeBindingLThingId;0131
É
|org.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#recoverLastWriteModel(LThingId;)LSource;133

recoverLastWriteModel134
1
*Recovered#typeBindingLAbstractWriteModel;0136

findAllInternal137
#
Recovered#typeBindingLBson;0139

Bson141
v
oorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#getMongoSort(LQuery;)LBson;143
,
%Recovered#typeBindingLFindPublisher;0145
Å
zorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#sudoStreamMetadata(LEntityId;)LSource;147

sudoStreamMetadata148
'
 Recovered#typeBindingLEntityId;0150
'
 Recovered#typeBindingLMetadata;0152
(
!Recovered#typeBindingLPublisher;0154
ò
êorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#toResultList(Ljava/util/List;IILjava/util/List;)LResultList;156

toResultList157


ResultList159
)
"Recovered#typeBindingLSortOption;0161
ì
ãorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#toTimestampedThingIds(Ljava/util/List;)Ljava/util/List;163
(
!Recovered#typeBindingLJsonArray;0165

toTimestampedThingIds166
ê
àorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#toTimestampedThingId(LDocument;)LTimestampedThingId;168

toTimestampedThingId169

TimestampedThingId171

ThingId173
y
rorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#toThingId(LDocument;)LThingId;175
ò
êorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#getModifiedTimestampOptional(LDocument;)Ljava/util/Optional;177

	toThingId178
#
getModifiedTimestampOptional179

getMongoFilter180

getMongoSort181
)
"Recovered#typeBindingLMongoQuery;0183
0
)handleMongoExecutionTimeExceededException184

xorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#readAsMetadata(LDocument;)LMetadata;186

readAsMetadata187

Metadata189
'
 Recovered#typeBindingLPolicyId;0191
(
!Recovered#typeBindingLPolicyTag;0193
,
%Recovered#typeBindingLDittoBsonJson;0195
ê
àorg.eclipse.ditto.thingsearch.service.persistence.read.MongoThingsSearchPersistence#documentToWriteModel(LDocument;)LAbstractWriteModel;197

documentToWriteModel198

AbstractWriteModel200J

1
12Z

3	
354j’
@
41:
414220 *
1] ](26:3B
	
9
21


11
43
F
146?
14614751 *
1¢ ¢(26:3B
	
9
10

11
148

89
899015

190
19019115
@
44:
444520 *
1^ ^(26:3B
	
9
21


11
46
F
107?
10710851 *
1Â Â(26:3B
	
9
21

11
180

182
18218315

140
14014115

151
15115215

149
14915015

130
13013115
F
132?
13213351 *
1Ò Ò(26:3B
	
9
10

11
134

69
697015
F
118?
11811951 *
1œ œ(26:3B
	
9
10

11
120

138
13813915
@
33:
333420 *
1[ [(26:3B
	
9
21


11
35
B
77<
777851 *
1í í(26:3B
	
9
10


11
79
@
28:
282920 *
1Y Y(26:3B
	
9
21


11
30

85
858615
9
64
678 *
1V V(0:3B
	
9
10


11
12

36
363715
B
80<
808151 *
1ù ù(26:3B
	
9
10


11
82
F
176?
17617751 *
1ÿ ÿ(26:3B
	
9
21

11
179

121
12112215
F
127?
12712851 *
1‡ ‡(26:3B
	
9
10

11
129

170
17017115
@
49:
495051 *
1f f(26:3B
	
9
10


11
12
B
73<
737451 *
1å å(26:3B
	
9
10


11
75
F
115?
11511651 *
1   (26:3B
	
9
10

11
117
F
142?
14214351 *
1Ô Ô(26:3B
	
9
21

11
181
F
167?
16716851 *
1– –(26:3B
	
9
21

11
169

23
232415

135
13513615

105
10510615
F
196?
19619751 *
1ò ò(26:3B
	
9
21

11
198

109
10911015

192
19219315

55
555615

98
989915

194
19419515

158
15815915
@
38:
383920 *
1\ \(26:3B
	
9
21


11
40

111
11111215

199
19920015
@
63:
636451 *
1v v(26:3B
	
9
21


11
12

160
16016115

188
18818915

153
15315415

26
262715

83
838415

91
919215
F
125?
12512651 *
1¸ ¸(26:3B
	
9
21

11
137

101
10110215
F
174?
17417551 *
1‘ ‘(26:3B
	
9
21

11
178

13
131415

47
474815

164
16416515

65
656615
F
155?
15515651 *
1≥ ≥(26:3B
	
9
21

11
157

57
575815

60
606115

103
10310415

87
878815

123
12312415

52
525315
F
113?
11311451 *
1Ù Ù(26:3B
	
9
21

11
184
F
162?
16216351 *
1   (26:3B
	
9
21

11
166
B
93<
939451 *
1∑ ∑(26:3B
	
9
10


11
95

172
17217315

31
313215
F
185?
18518651 *
1˛ ˛(26:3B
	
9
21

11
187

71
717215

144
14414515
@
18:
181920 *
1X X(26:3B
	
9
21


11
22

96
969715

67
676815r•N

61316*
1V< V(S

61317*
1V< V(S

182325*
1X X("

182317*
1X X("

182617*
1X# X(+

182317*
1X- X(7

283125*
1Y Y(!

283117*
1Y Y(!

283117*
1Y" Y(%

333625*
1[ [(#

333617*
1[ [(#

333617*
1[$ [(4

444725*
1^ ^(

444717*
1^ ^(

444717*
1^ ^(#

495254*
1f/ f(?

495554*
1fS f(^

495754*
1g g(*

49659*
1f f((

495225*
1f@ f(K

495217*
1f/ f(?

495525*
1f_ f(j

495517*
1fS f(^

495725*
1g+ g(<

495717*
1g g(*

496025*
1h h(%

496017*
1h h(

492317*
1k	 k(

491862*
1k	 k(

493117*
1n	 n(

492862*
1n	 n(

493617*
1o	 o(

493362*
1o	 o(

493862*
1p	 p(

494162*
1q	 q($

494717*
1r	 r(

494462*
1r	 r(

492862*
1s	 s(

493117*
1s	 s(

492862*
1s	 s(

636554*
1w w("

636754*
1x x(!

636954*
1y y(#

637154*
1| |(

63659*
1v v()

636525*
1w- w(7

636517*
1w w("

632617*
1w# w(+

636725*
1x" x(%

636717*
1x x(!

636925*
1y$ y(4

636917*
1y y(#

637125*
1| |(#

637117*
1| |(

63617*
1~	 ~(

63662*
1~	 ~(

632317*
1~ ~(

631862*
1~ ~(

63617*
1	 (

63662*
1	 (

633117*
1 (

632862*
1 (

63617*
1Ä	 Ä(

63662*
1Ä	 Ä(

633617*
1Ä Ä(

633362*
1Ä Ä(

63617*
1Å	 Å(

63662*
1Å	 Å(

633862*
1Å Å(

63617*
1Ç	 Ç(

63662*
1Ç	 Ç(

634162*
1Ç Ç()

63617*
1É	 É(

63662*
1É	 É(

634717*
1É É(

634462*
1É É(

73676*
1å å((

73617*
1å å((

737125*
1ç ç("

737117*
1ç ç(

73659*
1é é(0

732317*
1é1 é(;

731862*
1é1 é(;

733117*
1é= é(@

732862*
1é= é(@

733617*
1éB é(R

733362*
1éB é(R

733862*
1éT é(`

734162*
1è è(,

773362*
1î î( 

773617*
1î î( 

773362*
1î î( 

774162*
1ï% ï(@

808376*
1û û(

808317*
1û û(

808517*
1û û(.

808717*
1û0 û(7

808925*
1ü, ü(>

808917*
1ü ü(!

802617*
1ü" ü(*

801862*
1üA ü(K

802317*
1üA ü(K

801862*
1üA ü(K

809117*
1∞% ∞(?

938376*
1∏ ∏(

939654*
1∏. ∏(3

938317*
1∏ ∏(

938717*
1∏ ∏( 

939625*
1∏4 ∏(9

939617*
1∏. ∏(3

9398100*
1π π(

9310117*
1π π(

9310325*
1Ω Ω('

9310317*
1Ω Ω(

9310576*
1Ω* Ω(8

93662*
1Ω* Ω(8

9310759*
1Ω* Ω(8

932862*
1æ	 æ(

933117*
1æ	 æ(

932862*
1æ	 æ(

9310925*
1¿ ¿((

9310917*
1¿ ¿(

933862*
1√ √(&

933862*
1√ √(&

931862*
1≈% ≈(/

932317*
1≈% ≈(/

931862*
1≈% ≈(/

9311176*
1∆ ∆(D

93662*
1∆ ∆(D

9311359*
1∆ ∆(D

1158376*
1À À(

1159654*
1À2 À(7

1158317*
1À À(

1158717*
1À À( 

1159625*
1À8 À(=

1159617*
1À2 À(7

1158376*
1Ã Ã(

115662*
1Ã Ã(

1159359*
1Ã Ã(

1188376*
1– –(

1189654*
1–J –(O

1188317*
1– –(

11812117*
1– –(

11812317*
1– –(0

1188717*
1–3 –(:

1189625*
1–P –(U

1189617*
1–J –(O

11898100*
1— —(

11810117*
1— —(

11898100*
1“ “(

11810117*
1“ “(

1188376*
1ÿ ÿ(

118662*
1ÿ ÿ(

11812559*
1ÿ ÿ(

1183862*
1ÿZ ÿ(f

11811176*
1‹ ‹(D

118662*
1‹ ‹(D

11811359*
1‹ ‹(D

1278376*
1· ·(

1279654*
1·< ·(A

1278317*
1· ·(

12713017*
1· ·(

1278717*
1· ·(#

1279625*
1·B ·(G

1279617*
1·< ·(A

12798100*
1‚ ‚(

12710117*
1‚ ‚(

1278376*
1Â Â(

127662*
1Â Â(

12712559*
1Â Â(

127617*
1Ê Ê(2

1273862*
1Á Á(*

1328376*
1Ò Ò(

13213054*
1ÒL Ò(S

1328317*
1Ò Ò(

13213517*
1Ò Ò(%

1328717*
1Ò' Ò(.

13213025*
1ÒT Ò([

13213017*
1ÒL Ò(S

1321862*
1Ù Ù(

1322317*
1Ù Ù(

1321862*
1Ù Ù(

13213517*
1ˆ ˆ(+

132617*
1¯ ¯(2

1258376*
1¸ ¸(

1259654*
1¸= ¸(B

1258317*
1¸ ¸(

1252617*
1¸ ¸(

1258717*
1¸ ¸(%

1259625*
1¸C ¸(H

1259617*
1¸= ¸(B

12598100*
1˝ ˝(

12510117*
1˝ ˝(

12598100*
1˛ ˛(

12510117*
1˛ ˛(

12598100*
1ˇ ˇ(

12510117*
1ˇ ˇ(

12510325*
1É É('

12510317*
1É É(

12510576*
1É* É(8

125662*
1É* É(8

12510759*
1É* É(8

1252862*
1Ñ Ñ(

1253117*
1Ñ Ñ(

1252862*
1Ñ Ñ(

1252862*
1Ö Ö(

1253117*
1Ö Ö(

1252862*
1Ö Ö(

12513825*
1à à(

12513817*
1à à(

12514076*
1à" à(.

125662*
1à" à(.

12514259*
1à" à(.

12513825*
1ã ã(

12513817*
1ã ã(

12514425*
1å' å(4

12514417*
1å å(

1252617*
1å å(%

1251862*
1ç ç(

1252317*
1ç ç(

1251862*
1ç ç(

1252617*
1ç. ç(6

1254462*
1é é($

1254717*
1é é($

1254462*
1é é($

12514425*
1ì' ì(=

12514417*
1ì ì(

1252617*
1ì ì(%

12514425*
1õ' õ(D

12514417*
1õ õ(

1252617*
1õ õ(%

1468376*
1£ £(

14614954*
1£? £(G

1468317*
1£ £(

14615117*
1£ £(

1468717*
1£ £($

14614925*
1£H £(R

14614917*
1£? £(G

14613825*
1§ §($

14613817*
1§ §(

14613825*
1• •(

14613817*
1• •(

14613825*
1® ®(,

14613817*
1® ®(

14613825*
1¨ ¨(

14613817*
1¨ ¨(

14615325*
1≠# ≠(,

14615317*
1≠ ≠(

1462617*
1≠ ≠(!

1461862*
1≠/ ≠(9

1462317*
1≠/ ≠(9

1461862*
1≠/ ≠(9

146617*
1∞4 ∞(P

15515876*
1≥ ≥(

15515817*
1≥ ≥(

15512317*
1≥ ≥(*

1552617*
1≥D ≥(L

15516017*
1µ µ("

1552862*
1∑	 ∑(

1553117*
1∑	 ∑(

1552862*
1∑	 ∑(

15512125*
1∫. ∫(=

15512117*
1∫ ∫(

15512317*
1∫ ∫(,

155662*
1º4 º(I

15516259*
1º4 º(I

1552617*
1ø ø( 

1552625*
1¿ ¿(&

1552617*
1¿ ¿(

15516425*
1¬ ¬('

15516417*
1¬ ¬(

155662*
1√4 √(I

15516259*
1√4 √(I

1552862*
1∆	 ∆(

1553117*
1∆	 ∆(

1552862*
1∆	 ∆(

16212317*
1   (+

1622617*
1 N  (V

162617*
1Ã Ã(2

16717076*
1– –(&

1672654*
1–B –(J

16717017*
1– –(&

1672625*
1–K –(N

1672617*
1–B –(J

16717276*
1—' —(0

167662*
1—' —(0

16717459*
1—' —(0

167662*
1—7 —(S

16717659*
1—7 —(S

17417276*
1‘ ‘(

1742654*
1‘, ‘(4

17417217*
1‘ ‘(

1742625*
1‘5 ‘(8

1742617*
1‘, ‘(4

1762654*
1ÿI ÿ(Q

1762625*
1ÿR ÿ(U

1762617*
1ÿI ÿ(Q

10710576*
1Â Â( 

1079654*
1Â6 Â(;

10710517*
1Â Â( 

1079625*
1Â< Â(A

1079617*
1Â6 Â(;

10798100*
1Ê Ê(

10710117*
1Ê Ê(

14214076*
1Ô Ô(

1429654*
1Ô, Ô(1

14214017*
1Ô Ô(

1429625*
1Ô2 Ô(7

1429617*
1Ô, Ô(1

14218225*
1 ($

14218217*
1 (

14218217*
1( (2

11311176*
1Ù Ù(#

11311117*
1Ù Ù(#

18518876*
1˛ ˛(

1852654*
1˛2 ˛(:

18518817*
1˛ ˛(

1852625*
1˛; ˛(C

1852617*
1˛2 ˛(:

18513025*
1ˇ ˇ(

18513017*
1ˇ ˇ(

18519025*
1É É( 

18519017*
1É É(

18519225*
1ä ä('

18519217*
1ä ä(

18519425*
1å å(*

18519417*
1å å(

18519217*
1ç ç(

1852617*
1éf é(n

19619976*
1ò ò(&

1962654*
1òB ò(J

19619917*
1ò ò(&

1962625*
1òK ò(S

1962617*
1òB ò(J

1962617*
1ô: ô(B

19615125*
1ö ö(&

19615117*
1ö ö(

19618876*
1ö) ö(7

196662*
1ö) ö(7

19618559*
1ö) ö(7